import{r as o,a3 as v,j as a,$ as u,k as A}from"./index-BN5VdF9C.js";import{T as E}from"./TablesWidget13-Cd8M9obo.js";import{b as C,a as T,D as q}from"./DynamicEditModal-CNYKIgHE.js";import{u as F}from"./useRoles-hxGZl0zt.js";import{f}from"./dateFormatter-Bb4_azhc.js";import"./ThemeProvider-xapAScmA.js";import"./Modal-hNsSKBqn.js";import"./hasClass-Cnuk_FRl.js";import"./Form-Cn5CkzuQ.js";import"./warning-fuKJ2ttt.js";import"./useMutation-DJfR-UXw.js";const L=[{title:"Dashboard",path:"/dashboard",isSeparator:!1,isActive:!1},{title:"Master Role",path:"/master-role",isSeparator:!0,isActive:!0}],Q=()=>{const{roles:i,isLoading:p,addRole:b,updateRole:x,deleteRole:y}=F(),[h,n]=o.useState(!1),[R,r]=o.useState(!1),[D,m]=o.useState(!1),[l,t]=o.useState(null),{currentUser:s}=v(),_=[{key:"name",label:"Nama Role",className:"min-w-150px"},{key:"created_by",label:"Dibuat Oleh",className:"min-w-120px"},{key:"created_dt",label:"Dibuat Tanggal",className:"min-w-140px"},{key:"changed_by",label:"Diubah Oleh",className:"min-w-120px"},{key:"changed_dt",label:"Diubah Tanggal",className:"min-w-140px"}],g=i.map(e=>({id:e.id,name:e.name,created_by:e.created_by,created_dt:f(e.created_dt),changed_by:e.changed_by||"-",changed_dt:e.changed_dt?f(e.changed_dt):"-"})),N=()=>{n(!0)},w=e=>{b({name:e.name,user_id:s==null?void 0:s.full_name}),n(!1)},j=e=>{const d=i.find(c=>c.id===e.id);d&&(t(d),r(!0))},M=e=>{l&&(x({id:l.id,role:{name:e.name,user_id:s==null?void 0:s.full_name}}),r(!1),t(null))},S=e=>{const d=i.find(c=>c.id===e.id);d&&(t(d),m(!0))},k=()=>{l&&(y(l.id),m(!1),t(null))};return p?a.jsx(u,{children:a.jsxs("div",{className:"card-body text-center py-10",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("div",{className:"mt-3",children:"Memuat data role..."})]})}):a.jsxs("div",{className:"container-fluid",children:[a.jsx(A,{breadcrumbs:L,children:"Master Role"}),a.jsx(u,{children:a.jsx(E,{className:"card-xl-stretch",rows:g,columns:_,labelAdd:"Role",filters:[{key:"name",label:"Filter by Name"}],onDelete:S,onEdit:j,onAddClick:N})}),h&&a.jsx(C,{show:h,title:"Tambah Role",fields:[{name:"name",label:"Nama Role",type:"text",required:!0,icon:"shield",placeholder:"Masukkan nama role"}],onSubmit:w,onClose:()=>n(!1)}),l&&a.jsx(T,{show:R,title:"Edit Role",fields:[{name:"name",label:"Nama Role",type:"text",required:!0,icon:"shield"}],initialData:{name:l.name},onSave:M,onClose:()=>{r(!1),t(null)}}),l&&a.jsx(q,{show:D,title:"Hapus Role",itemName:l.name,onConfirm:k,onClose:()=>{m(!1),t(null)}})]})};export{Q as default};
