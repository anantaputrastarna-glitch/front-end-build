import{w as B,ac as O,x as T,a9 as q,ad as H,B as K,j as e,K as l,y as M,F as k,v as L,r as w}from"./index-BN5VdF9C.js";import{M as c}from"./Modal-hNsSKBqn.js";import{B as d,F as t}from"./Form-Cn5CkzuQ.js";import{I as C}from"./TablesWidget13-Cd8M9obo.js";const V=({show:N,title:y,fields:j,initialValues:u={},onSubmit:p,onClose:x})=>{const b=B().shape(j.reduce((n,a)=>{let r=O();return a.type==="text"||a.type==="textarea"||a.type==="select"?r=T():a.type==="number"?r=q():a.type==="date"?r=H():a.type==="checkbox"&&(r=K()),a.required&&(r=r.required(`${a.label} is required`)),n[a.name]=r,n},{})),g=j.reduce((n,a)=>(a.name in u?n[a.name]=u[a.name]:a.type==="number"?n[a.name]=0:a.type==="date"?n[a.name]="":a.type==="checkbox"?n[a.name]=!0:n[a.name]="",n),{...u});return e.jsxs(c,{show:N,onHide:x,centered:!0,size:"lg",backdrop:"static",className:"fade-in",children:[e.jsxs(c.Header,{className:"bg-light",children:[e.jsxs(c.Title,{className:"d-flex align-items-center",children:[e.jsx(l,{iconName:"plus",className:"fs-2 me-3 text-primary"}),y]}),e.jsx(d,{variant:"link",className:"btn-close",onClick:x})]}),e.jsx(c.Body,{className:"p-5",children:e.jsx(M,{initialValues:g,validationSchema:b,onSubmit:n=>{console.log("Formik onSubmit called with:",n),p(n)},enableReinitialize:!0,children:n=>e.jsx(t,{onSubmit:n.handleSubmit,id:"dynamic-form",onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),n.handleSubmit())},children:j.map(a=>e.jsxs(t.Group,{className:"mb-4",children:[e.jsxs(t.Label,{className:"fw-bold",children:[a.label,a.required&&e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(C,{children:[a.icon&&a.type!=="checkbox"&&e.jsx(C.Text,{children:e.jsx(l,{iconName:a.icon,className:"fs-3"})}),a.type==="textarea"?e.jsx(k,{name:a.name,children:r=>e.jsx(t.Control,{as:"textarea",rows:3,placeholder:a.placeholder?a.placeholder:`Enter ${a.label.toLowerCase()}`,...r.field,isInvalid:!!(n.errors[a.name]&&n.touched[a.name]),className:"form-control-solid",readOnly:a.readonly})}):a.type==="select"?e.jsx(k,{name:a.name,children:r=>{var v;return e.jsxs(t.Select,{...r.field,onChange:o=>{r.field.onChange(o),a.onChange&&a.onChange(o.target.value,n)},isInvalid:!!(n.errors[a.name]&&n.touched[a.name]),className:"form-control-solid",disabled:a.readonly,children:[e.jsxs("option",{value:"",children:["Select ",a.label.toLowerCase()]}),(v=a.options)==null?void 0:v.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})}}):a.type==="checkbox"?e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(k,{name:a.name,children:r=>e.jsx("div",{className:"form-check form-check-custom form-check-solid form-switch mb-2",children:e.jsx("input",{id:a.name,className:"form-check-input",type:"checkbox",name:r.field.name,checked:r.field.value,onBlur:r.field.onBlur,onChange:r.field.onChange,readOnly:a.readonly})})})}):e.jsx(k,{name:a.name,children:r=>e.jsx(t.Control,{type:a.type,placeholder:a.placeholder?a.placeholder:`Enter ${a.label.toLowerCase()}`,...r.field,isInvalid:!!(n.errors[a.name]&&n.touched[a.name]),className:"form-control-solid",readOnly:a.readonly??!1})}),e.jsx(L,{name:a.name,component:"div",className:"invalid-feedback d-block"})]})]},a.name))})})}),e.jsxs(c.Footer,{className:"bg-light",children:[e.jsxs(d,{variant:"light",className:"btn-active-light-danger",onClick:x,children:[e.jsx(l,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),e.jsxs(d,{variant:"primary",type:"submit",form:"dynamic-form",children:[e.jsx(l,{iconName:"check",className:"fs-2 me-2"}),"Save"]})]})]})},Y=({show:N,title:y,itemName:j,onConfirm:u,onClose:p})=>{const x=()=>{u(),p()};return e.jsxs(c,{show:N,onHide:p,centered:!0,backdrop:"static",className:"fade-in",children:[e.jsxs(c.Header,{className:"bg-light",children:[e.jsxs(c.Title,{className:"d-flex align-items-center",children:[e.jsx(l,{iconName:"trash",className:"fs-2 me-3 text-danger"}),y]}),e.jsx(d,{variant:"link",className:"btn-close",onClick:p})]}),e.jsxs(c.Body,{className:"p-5 text-center",children:[e.jsx(l,{iconName:"warning",className:"fs-3x text-warning mb-5"}),e.jsx("h4",{className:"mb-3",children:"Are you sure?"}),e.jsxs("p",{className:"text-muted fs-5",children:["You are about to delete ",e.jsxs("strong",{children:['"',j,'"']}),". This action cannot be undone."]})]}),e.jsxs(c.Footer,{className:"bg-light",children:[e.jsxs(d,{variant:"light",className:"btn-active-light-primary",onClick:p,children:[e.jsx(l,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),e.jsxs(d,{variant:"danger",onClick:x,children:[e.jsx(l,{iconName:"trash",className:"fs-2 me-2"}),"Delete"]})]})]})},J=({show:N,title:y,fields:j,initialData:u,onSave:p,onClose:x})=>{const[b,g]=w.useState({}),[n,a]=w.useState({});w.useEffect(()=>{g(u),a({})},[u]);const r=()=>{const s={};return j.forEach(m=>{var i;m.required&&!((i=b[m.name])!=null&&i.toString().trim())&&(s[m.name]=`${m.label} is required.`)}),s},v=()=>{const s=r();if(Object.keys(s).length>0){a(s);return}p(b)},o=(s,m)=>{g(i=>({...i,[s]:m})),n[s]&&a(i=>({...i,[s]:""}))},E=s=>{var S;const m=b[s.name]||"",i=n[s.name];return e.jsxs(t.Group,{className:"mb-4",children:[e.jsx(t.Label,{className:"fw-bold",children:s.label}),e.jsxs(C,{children:[s.icon&&s.type!=="checkbox"&&e.jsx(C.Text,{children:e.jsx(l,{iconName:s.icon,className:"fs-3"})}),s.type==="select"?e.jsx(t.Select,{value:m,onChange:h=>{const F=h.target.value;o(s.name,F),s.onChange&&s.onChange(F,{setFieldValue:(D,I)=>g($=>({...$,[D]:I}))})},isInvalid:!!i,className:"form-control-solid",disabled:s.readonly,children:(S=s.options)==null?void 0:S.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}):s.type==="textarea"?e.jsx(t.Control,{as:"textarea",rows:3,placeholder:s.placeholder,value:m,onChange:h=>o(s.name,h.target.value),isInvalid:!!i,className:"form-control-solid",readOnly:s.readonly}):s.type==="checkbox"?e.jsx("div",{className:"form-check form-check-custom form-check-solid form-switch mb-2",children:e.jsx("input",{type:"checkbox",id:s.name,checked:m,onChange:h=>o(s.name,h.target.checked),className:"form-check-input",readOnly:s.readonly})}):e.jsx(t.Control,{type:s.type,placeholder:s.placeholder,value:m,onChange:h=>o(s.name,h.target.value),isInvalid:!!i,className:"form-control-solid",readOnly:s.readonly}),e.jsx(t.Control.Feedback,{type:"invalid",children:i})]})]},s.name)};return e.jsxs(c,{show:N,onHide:x,centered:!0,size:"lg",backdrop:"static",className:"fade-in",children:[e.jsxs(c.Header,{className:"bg-light",children:[e.jsxs(c.Title,{className:"d-flex align-items-center",children:[e.jsx(l,{iconName:"pencil",className:"fs-2 me-3 text-primary"}),y]}),e.jsx(d,{variant:"link",className:"btn-close",onClick:x})]}),e.jsx(c.Body,{className:"p-5",children:e.jsx(t,{onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),v())},children:j.map(E)})}),e.jsxs(c.Footer,{className:"bg-light",children:[e.jsxs(d,{variant:"light",className:"btn-active-light-danger",onClick:x,children:[e.jsx(l,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),e.jsxs(d,{variant:"primary",onClick:v,children:[e.jsx(l,{iconName:"check",className:"fs-2 me-2"}),"Save Changes"]})]})]})};export{Y as D,J as a,V as b};
