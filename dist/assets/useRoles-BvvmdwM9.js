import{a0 as i,Z as g,X as R,a1 as l,_ as o}from"./index-B3agpCGs.js";import{u}from"./useMutation-nrZU9vUa.js";const f=async()=>(await i.get("/role?start=0&length=100")).data.data,h=async a=>(await i.post("/role",a)).data.data,b=async(a,n)=>(await i.put(`/role/${a}`,n)).data.data,A=async a=>{await i.delete(`/role/${a}`)},Q=()=>{const a=g(),{data:n=[],isLoading:c,error:d}=R({queryKey:["roles"],queryFn:f}),m=u({mutationFn:e=>h(e),onSuccess:()=>{a.invalidateQueries({queryKey:["roles"]}),o.success("Role berhasil ditambahkan")},onError:e=>{var r;const s=e instanceof l?(r=e.response)==null?void 0:r.data.message:`Gagal menambahkan role: ${e.message}`;Array.isArray(s)?s.forEach(t=>o.error(t)):o.error(s)}}),p=u({mutationFn:({id:e,role:s})=>b(e,s),onSuccess:()=>{a.invalidateQueries({queryKey:["roles"]}),o.success("Role berhasil diperbarui")},onError:e=>{var r;const s=e instanceof l?(r=e.response)==null?void 0:r.data.message:`Gagal memperbarui role: ${e.message}`;Array.isArray(s)?s.forEach(t=>o.error(t)):o.error(s)}}),y=u({mutationFn:A,onSuccess:()=>{a.invalidateQueries({queryKey:["roles"]}),o.success("Role berhasil dihapus")},onError:e=>{var r;const s=e instanceof l?(r=e.response)==null?void 0:r.data.message:`Gagal menghapus role: ${e.message}`;Array.isArray(s)?s.forEach(t=>o.error(t)):o.error(s)}});return{roles:n,isLoading:c,error:d,addRole:m.mutate,updateRole:p.mutate,deleteRole:y.mutate}};export{Q as u};
